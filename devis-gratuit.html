<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RENOLIX - Réalisations</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
<style>
body {margin:0;font-family:'Montserrat',sans-serif;background:#fff;color:#222;}
header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 5px 20px;
  height: 60px;
  position: fixed;
  width: 100%;
  top: 0;
  z-index: 1000;
  background: rgba(255,255,255,0.95);
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}
.logo-container {display:flex;align-items:center;}
.logo-container img{width:50px;height:auto;}
.header-center {position: absolute; left: 47%; letter-spacing: 2px; transform: translateX(-50%); text-align: center;}
.header-center a { text-decoration: none; }
.header-center h1 {
  margin:0;font-size:28.5px;font-family:'Playfair Display', serif;font-weight:700;
  background: linear-gradient(-45deg,#000 20%,#d4af37 50%,#000 80%);
  background-size:200% 200%;-webkit-background-clip:text;-webkit-text-fill-color:transparent;
  animation: luxuryShine 2.2s linear infinite;
}
@keyframes luxuryShine {0% {background-position:200% 0;}100% {background-position:-200% 0;}}
.menu { display: flex; align-items: center; padding-right: 25px; }
nav { display:flex; gap:15px; align-items:center; }
nav a { color:#222; text-decoration:none; font-weight:500; transition:.3s; }
nav a:hover { color:#d4af37; }

/* Bouton Connexion */
.connexion-btn {
  display:inline-block;
  background:linear-gradient(90deg,#d4af37,#b8860b);
  color:#fff !important;
  font-weight:bold;
  padding:8px 18px;
  border-radius:20px;
  text-decoration:none;
  margin-top:10px;
  transition:0.3s;
  text-align:center;
}
.connexion-btn:hover { box-shadow:0 0 15px #d4af37; }

/* Hamburger */
.menu-toggle { display:none; flex-direction:column; cursor:pointer; padding:8px; margin-right:10px; }
.menu-toggle div { width:25px; height:3px; background:#222; margin:4px 0; transition:0.3s; }

/* Submenu/profil animation */
@keyframes submenuSlide {0%{opacity:0;transform:translateY(-10px);}100%{opacity:1;transform:translateY(0);}}

/* Mobile */
@media(max-width:768px){
  nav {
    position:absolute; top:60px; right:10px; width:220px; flex-direction:column; display:none;
    padding:15px 20px; background: rgba(255,255,255,0.3); backdrop-filter: blur(12px);
    border: 2px solid #d4af37; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.25); z-index: 1050;
    transition: all 0.4s ease;
  }
  nav.active {display:flex; flex-direction:column;}
  nav a { margin:5px 0; padding:10px 15px; font-weight: 600; color:#222; text-transform: uppercase;
          letter-spacing: 1px; border-radius: 10px; transition: all 0.3s ease; }
  nav a:hover { background: linear-gradient(90deg,#d4af37,#ffd700); color:#fff; 
               box-shadow: 0 0 10px #ffd700, 0 0 20px #d4af37; }
  .submenu { display:none; flex-direction:column; padding-left:15px; margin-top:5px; border-left:2px solid #d4af37; }
  .submenu a { padding:8px 15px; font-weight: 500; border-radius: 8px; transition: all 0.3s ease; }
  .submenu a:hover { background: linear-gradient(90deg,#ffd700,#d4af37); color:#222; 
                     box-shadow: 0 0 8px #ffd700, 0 0 15px #d4af37; }
  .menu-toggle {display:flex;}
}

/* Section */
section { padding:40px 10%; }
h2 { color:#d4af37; text-align:center; margin-bottom:25px; font-size:28px; }

/* Footer */
footer { background:#f9f9f9; padding:25px; text-align:center; color:#555; font-size:14px; border-top:1px solid #eee; }
footer a { color:#d4af37; text-decoration:none; margin:0 10px; }

/* --- FORMULAIRE LUXE --- */
.form-container {
  max-width: 1400px;
  margin: 0 auto;
  background: #fff;
  padding: 40px;
  border-radius: 20px;
  box-shadow: 0 15px 40px rgba(0,0,0,0.15);
  border: 2px solid #d4af37;
  text-align: left;
}
.form-container label {
  display:block;
  margin-bottom:8px;
  font-weight:600;
  color:#333;
  text-align:left;
}
.form-container input, 
.form-container select, 
.form-container textarea {
  width:95%;
  padding:12px 15px;
  margin-bottom:20px;
  border:1px solid #ccc;
  border-radius:12px;
  font-size:15px;
  transition: all 0.3s ease;
  margin-left:0;
}
.form-container input:focus,
.form-container select:focus,
.form-container textarea:focus {
  border-color:#d4af37;
  box-shadow: 0 0 10px rgba(212,175,55,0.4);
  outline:none;
}
.form-container textarea { resize: vertical; min-height:100px; }
.form-container button {
  width:95%;
  padding:15px;
  border:none;
  border-radius:15px;
  font-size:16px;
  font-weight:700;
  color:#fff;
  background: linear-gradient(90deg,#d4af37,#ffd700);
  cursor:pointer;
  transition:0.4s;
  box-shadow:0 5px 15px rgba(0,0,0,0.2);
  margin-left:0;
}
.form-container button:hover {
  transform: scale(1.05);
  box-shadow:0 8px 20px rgba(0,0,0,0.3);
}

/* PROFILE MENU */
.profile {position:relative;margin:0 8px 0 6px;z-index:1100;}
.profile-btn {
  width:38px;height:38px;border-radius:50%;border:2px solid transparent;
  background:linear-gradient(#fff,#fff) padding-box,linear-gradient(90deg,#d4af37,#b8860b) border-box;
  display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all 0.3s ease;
}
.profile-btn:focus {outline:none;}
.profile-btn:hover {box-shadow:0 0 12px rgba(212,175,55,0.8);transform:translateY(-2px);}
.profile-btn svg {width:20px;height:20px;fill:#b8860b;}
.profile-dropdown {
  position:absolute;top:46px;right:0;min-width:230px;background:rgba(255,255,255,0.92);
  backdrop-filter:blur(12px);border:2px solid #d4af37;border-radius:14px;
  box-shadow:0 10px 25px rgba(0,0,0,0.2);padding:8px;display:none;
}
.profile-dropdown.open {display:block;animation:submenuSlide 0.25s ease forwards;}
.profile-email {font-size:13px;color:#444;margin:4px 8px 8px;padding:6px 8px;background:#faf7ef;border:1px dashed rgba(212,175,55,0.5);border-radius:8px;}
.profile-item {display:flex;align-items:center;gap:10px;padding:10px;border-radius:10px;color:#222;text-decoration:none;font-weight:600;transition:all 0.3s ease;}
.profile-item:hover {background:linear-gradient(90deg,#ffd700,#d4af37);color:#fff;box-shadow:0 0 10px #ffd700,0 0 18px #d4af37;}
.profile-divider {height:1px;margin:6px 4px;background:linear-gradient(90deg,transparent,#d4af37,transparent);}
.hidden {display:none;}
</style>
</head>
<body>

<header>
  <div class="logo-container">
    <img src="https://i.postimg.cc/hjNvjvcc/Logo-Cosm-tiques-Minimaliste-Luxe-Noir-Blanc-Dor-20250711-192039-0000.png" alt="Logo Renolix">
  </div>
  <div class="header-center"><a href="index.html"><h1>RENOLIX</h1></a></div>
  <div class="menu">
    <nav id="nav-links">
      <a href="index.html">Accueil</a>
      <div>
        <a href="#" id="realisations-btn">Réalisations ▼</a>
        <div class="submenu" id="realisations-submenu">
          <a href="placo-platre.html">Placo & Plâtre</a>
          <a href="Peinture.html">Peinture</a>
          <a href="dalle-de-sol.html">Dalle de sol</a>
          <a href="Plomberie.html">Plomberie</a>
          <a href="électricité.html">Électricité</a>
          <a href="cuisine-&-dressing.html">Cuisine & Dressing</a>
        </div>
      </div>
      <a href="devis-gratuit.html">Devis Gratuit</a>
      <a href="à-propos.html">À propos</a>
      <a href="contact.html">Contact</a>
      <a href="login.html" class="connexion-btn">Connexion</a>
    </nav>

    <!-- Icône Profil -->
    <div class="profile" id="profile">
      <button class="profile-btn" id="profileButton" aria-label="Ouvrir le menu profil" aria-haspopup="menu" aria-expanded="false">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5Zm0 2c-4.42 0-8 2.69-8 6v1h16v-1c0-3.31-3.58-6-8-6Z"></path>
        </svg>
      </button>
      <div class="profile-dropdown" id="profileDropdown" role="menu" aria-hidden="true">
        <!-- État connecté -->
        <div id="profile-logged-in" class="hidden">
          <div class="profile-email"><strong>Email:</strong> <span id="profileEmail"></span></div>
          <a href="profil.html" class="profile-item" role="menuitem">Profil</a>
          <a href="parametres.html" class="profile-item" role="menuitem">Paramètres</a>
          <div class="profile-divider"></div>
          <a href="#" id="logoutBtn" class="profile-item" role="menuitem">Déconnexion</a>
        </div>
        <!-- État non connecté -->
        <div id="profile-logged-out" class="hidden">
          <a href="login.html" class="profile-item" role="menuitem">Connexion / Inscription</a>
        </div>
      </div>
    </div>

    <div class="menu-toggle" onclick="toggleMenu()">
      <div></div><div></div><div></div>
    </div>
  </div>
</header>

<!-- FORMULAIRE DEVIS -->
<section style="margin-top:100px;">
  <h2>Demande de Devis Gratuit</h2>
  <div class="form-container">
    <form id="devisForm" action="https://getform.io/f/bxozzzwa" method="POST">
      <input type="hidden" name="_next" value="https://renolix.neocities.org/merci.html">

      <label>Nom complet</label>
      <input type="text" name="Nom Complet" required>

      <label>Email</label>
      <input type="email" name="Email" required>

      <label>Numéro de téléphone</label>
      <div style="display:flex; gap:10px; width:95%;">
        <input type="text" value="+213" disabled style="width:80px; text-align:center; font-weight:bold; background:#f9f9f9;">
        <input type="tel" name="Téléphone" placeholder="Ex: 542093648" required style="flex:1;">
      </div>

      <label>Wilaya</label>
      <select name="Wilaya" required>
        <option value="">-- Sélectionnez votre wilaya --</option>
        <option>Adrar</option><option>Chlef</option><option>Laghouat</option><option>Oum El Bouaghi</option>
        <option>Batna</option><option>Béjaïa</option><option>Biskra</option><option>Béchar</option>
        <option>Blida</option><option>Bouira</option><option>Tamanrasset</option><option>Tébessa</option>
        <option>Tlemcen</option><option>Tiaret</option><option>Tizi Ouzou</option><option>Alger</option>
        <option>Djelfa</option><option>Jijel</option><option>Sétif</option><option>Saïda</option>
        <option>Skikda</option><option>Sidi Bel Abbès</option><option>Annaba</option><option>Guelma</option>
        <option>Constantine</option><option>Médéa</option><option>Mostaganem</option><option>MSila</option>
        <option>Mascara</option><option>Ouargla</option><option>Oran</option><option>El Bayadh</option>
        <option>Illizi</option><option>Bordj Bou Arréridj</option><option>Boumerdès</option><option>El Tarf</option>
        <option>Tindouf</option><option>Tissemsilt</option><option>El Oued</option><option>Khenchela</option>
        <option>Souk Ahras</option><option>Tipaza</option><option>Mila</option><option>Aïn Defla</option>
        <option>Naâma</option><option>Aïn Témouchent</option><option>Ghardaïa</option><option>Relizane</option>
        <option>Timimoun</option><option>Bordj Badji Mokhtar</option><option>Ouled Djellal</option><option>Béni Abbès</option>
        <option>In Salah</option><option>In Guezzam</option><option>Touggourt</option><option>Djanet</option>
        <option>El M'Ghaier</option><option>El Meniaa</option>
      </select>

      <label>Adresse complète</label>
      <input type="text" name="Adresse" required>

      <label>Type de projet</label>
      <select name="Type de projet" required>
        <option value="">-- Sélectionnez --</option>
        <option>Placo & Plâtre</option>
        <option>Peinture</option>
        <option>Dalle de sol & Faïence</option>
        <option>Plomberie</option>
        <option>Électricité</option>
        <option>Cuisine</option>
        <option>Dressing</option>
      </select>

      <label>Surface (m²)</label>
      <input type="number" name="Surface" placeholder="Ex: 120" required>

      <label>Décrivez votre projet</label>
      <textarea name="Description" placeholder="Décrivez votre projet..." required></textarea>

      <label>Date prévue pour les travaux</label>
      <input type="date" name="Date prévue" required>

      <button type="submit">Envoyer ma demande</button>
    </form>
  </div>
</section>

<footer>
  <p>&copy; 2025 RENOLIX. Tous droits réservés.</p>
  <p>
    <a href="https://www.instagram.com/renolix.dz?igsh=M3JsZXd0NTJjY3d6" target="_blank">Instagram</a> |
    <a href="https://www.facebook.com/share/1724QHzM9r/" target="_blank">Facebook</a> |
    <a href="https://wa.me/213542093648" target="_blank">WhatsApp</a>
  </p>
</footer>

<!-- Supabase -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
function toggleMenu(){
  document.getElementById('nav-links').classList.toggle('active');
}
document.getElementById('realisations-btn').addEventListener('click', function(e){
  e.preventDefault();
  let submenu = document.getElementById('realisations-submenu');
  if(submenu.style.display === "flex"){
    submenu.style.display = "none";
  } else {
    submenu.style.display = "flex";
    submenu.style.flexDirection = "column";
  }
});

// --- REDIRECTION FORMULAIRE GETFORM ---
document.getElementById('devisForm').addEventListener('submit', function(e){
  e.preventDefault();
  var form = e.target;
  var data = new FormData(form);

  fetch(form.action, { method: 'POST', body: data })
    .then(function(){ window.location.href = "https://renolix.neocities.org/merci.html"; })
    .catch(function(){ alert("Une erreur est survenue, réessayez."); });
});

/* Supabase (auth) */
const { createClient } = supabase;
const supabaseUrl = "https://kawlncpapaxdzjyhnhhz.supabase.co";
const supabaseKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imthd2xuY3BhcGF4ZHpqeWhuaGh6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY4NjkwMjEsImV4cCI6MjA3MjQ0NTAyMX0.jm-6Ll26WU-y0EMCBMR7Zv_aX7XU3iPomuMZNofps2U";
const supabaseClient = createClient(supabaseUrl, supabaseKey);

/* Icône profil + menu */
const profileButton = document.getElementById('profileButton');
const profileDropdown = document.getElementById('profileDropdown');
const loggedInBox = document.getElementById('profile-logged-in');
const loggedOutBox = document.getElementById('profile-logged-out');
const profileEmailEl = document.getElementById('profileEmail');

function openProfile(){profileDropdown.classList.add('open');profileButton.setAttribute('aria-expanded','true');profileDropdown.setAttribute('aria-hidden','false');}
function closeProfile(){profileDropdown.classList.remove('open');profileButton.setAttribute('aria-expanded','false');profileDropdown.setAttribute('aria-hidden','true');}
function toggleProfile(){profileDropdown.classList.contains('open') ? closeProfile() : openProfile();}

profileButton.addEventListener('click', (e)=>{e.stopPropagation();toggleProfile();});
document.addEventListener('click', (e)=>{ if(!profileDropdown.contains(e.target) && !profileButton.contains(e.target)){ closeProfile(); }});
document.addEventListener('keydown', (e)=>{ if(e.key === 'Escape'){ closeProfile(); }});

async function updateProfileUI(){
  try{
    const { data: { user } } = await supabaseClient.auth.getUser();
    if(user){
      loggedOutBox.classList.add('hidden');
      loggedInBox.classList.remove('hidden');
      profileEmailEl.textContent = user.email || '';
    }else{
      loggedInBox.classList.add('hidden');
      loggedOutBox.classList.remove('hidden');
      profileEmailEl.textContent = '';
    }
  }catch(err){
    console.error("Erreur récupération utilisateur:", err);
    loggedInBox.classList.add('hidden');
    loggedOutBox.classList.remove('hidden');
  }
}
updateProfileUI();
supabaseClient.auth.onAuthStateChange(()=>{ updateProfileUI(); });

document.getElementById('logoutBtn').addEventListener('click', async (e)=>{
  e.preventDefault();
  await supabaseClient.auth.signOut();
  updateProfileUI();
  closeProfile();
});
</script>

</body>
</html>