<header>
  <div class="logo-container">
    <img src="https://i.postimg.cc/hjNvjvcc/Logo-Cosm-tiques-Minimaliste-Luxe-Noir-Blanc-Dor-20250711-192039-0000.png" alt="Logo Renolix">
  </div>

  <div class="header-center">
    <a href="index.html">
      <h1>RENOLIX</h1>
      <img src="https://cdn-icons-png.flaticon.com/512/149/149071.png" 
           alt="Profil" class="profile-icon" id="profileIcon">
    </a>
    <div class="profile-menu" id="profileMenu">
      <!-- Liens Se connecter / S'inscrire ou Profil / Paramètres / Déconnexion -->
    </div>
  </div>

  <div class="menu">
    <nav id="nav-links">
      <a href="index.html">Accueil</a>
      <div>
        <a href="#" id="realisations-btn">Réalisations ▼</a>
        <div class="submenu" id="realisations-submenu">
          <a href="placo-platre.html">Placo & Plâtre</a>
          <a href="Peinture.html">Peinture</a>
          <a href="dalle-de-sol.html">Dalle de sol</a>
          <a href="Plomberie.html">Plomberie</a>
          <a href="électricité.html">Électricité</a>
          <a href="cuisine-&-dressing.html">Cuisine & Dressing</a>
        </div>
      </div>
      <a href="devis-gratuit.html">Devis Gratuit</a>
      <a href="à-propos.html">À propos</a>
      <a href="contact.html">Contact</a>
      <a href="login.html" class="connexion-btn">Connexion</a>
    </nav>
    <div class="menu-toggle" onclick="toggleMenu()">
      <div></div><div></div><div></div>
    </div>
  </div>
</header>

<script>
function toggleMenu(){
  document.getElementById('nav-links').classList.toggle('active');
}

document.getElementById('realisations-btn').addEventListener('click', function(e){
  e.preventDefault();
  let submenu = document.getElementById('realisations-submenu');
  if(submenu.style.display === "flex"){
    submenu.style.display = "none";
  } else {
    submenu.style.display = "flex";
    submenu.style.flexDirection = "column";
  }
});

// Toggle menu profil
const profileIcon = document.getElementById('profileIcon');
const profileMenu = document.getElementById('profileMenu');
profileIcon.addEventListener('click', function(e){
  e.preventDefault();
  profileMenu.style.display = (profileMenu.style.display === "block") ? "none" : "block";
});

// Fermer le menu profil si clic en dehors
document.addEventListener('click', function(e){
  if(!profileIcon.contains(e.target) && !profileMenu.contains(e.target)){
    profileMenu.style.display = 'none';
  }
});
</script>

<!-- Firebase Auth -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-app.js";
import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyCK_JRF3Pzml-7JvYLpbXHTXIc7ntjCIXY",
  authDomain: "renolix.firebaseapp.com",
  projectId: "renolix",
  storageBucket: "renolix.firebasestorage.app",
  messagingSenderId: "693930423888",
  appId: "1:693930423888:web:d9eabdb9cce3e646ee8355"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const profileMenuFirebase = document.getElementById('profileMenu');

onAuthStateChanged(auth, user => {
  profileMenuFirebase.innerHTML = ''; // vider le menu
  if(user){
    // Email affiché
    const emailItem = document.createElement('div');
    emailItem.textContent = user.email;
    emailItem.style.padding = "8px 10px";
    emailItem.style.fontSize = "14px";
    emailItem.style.color = "#555";
    emailItem.style.borderBottom = "1px solid #eee";
    profileMenuFirebase.appendChild(emailItem);

    // Lien Profil
    const profileLink = document.createElement('a');
    profileLink.href = "profile.html"; 
    profileLink.textContent = "Profil";
    profileMenuFirebase.appendChild(profileLink);

    // Lien Paramètres
    const settingsLink = document.createElement('a');
    settingsLink.href = "settings.html"; 
    settingsLink.textContent = "Paramètres";
    profileMenuFirebase.appendChild(settingsLink);

    // Déconnexion
    const logoutLink = document.createElement('a');
    logoutLink.href = "#";
    logoutLink.textContent = "Déconnexion";
    logoutLink.addEventListener('click', async (e)=>{
      e.preventDefault();
      await signOut(auth);
      window.location.reload();
    });
    profileMenuFirebase.appendChild(logoutLink);

  } else {
    const loginLink = document.createElement('a');
    loginLink.href = "login.html";
    loginLink.textContent = "Se connecter";
    const registerLink = document.createElement('a');
    registerLink.href = "register.html";
    registerLink.textContent = "S'inscrire";
    profileMenuFirebase.appendChild(loginLink);
    profileMenuFirebase.appendChild(registerLink);
  }
});
</script>